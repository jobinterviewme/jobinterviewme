{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/ighil/Documents/ReactProyects/JobInterViewMe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/ighil/Documents/ReactProyects/JobInterViewMe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\ighil\\\\Documents\\\\ReactProyects\\\\JobInterViewMe\\\\src\\\\components\\\\GoogleLogin\\\\GoogleLogin.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport GoogleLogin from 'react-google-login';\nimport * as authAction from \"../../store/actions/authAction\";\nimport { connect } from \"react-redux\";\nimport { Button } from 'antd';\nimport AxiosConexionConfig from 'conexion/AxiosConexionConfig';\nimport { linkperfilpor } from 'configuracion/constantes';\nimport { useHistory } from 'react-router';\nimport { linkAreaPersonalProfesional } from 'configuracion/constantes';\nimport { linkContratarCita } from 'configuracion/constantes';\nimport { linkAreaPersonalCliente } from 'configuracion/constantes';\n\nvar GoogleLoginComponent = function GoogleLoginComponent(props) {\n  _s();\n\n  var link = props.link,\n      texto = props.texto;\n\n  var definirLink = function definirLink(prof) {\n    if (link === \"areaPersonal\") {\n      if (prof) {\n        return linkAreaPersonalProfesional;\n      } else {\n        return linkAreaPersonalCliente;\n      }\n    } else {\n      if (link === \"contratar\") {\n        return linkContratarCita + \"?\" + \"38\";\n      }\n    }\n  };\n\n  var failureGoogle = function failureGoogle(response) {\n    console.log(response);\n  };\n\n  var responseGoogle = function responseGoogle(response) {\n    var usuario = {\n      nombre: response.profileObj.givenName,\n      apellidos: response.profileObj.familyName,\n      email: response.profileObj.email,\n      loginGoogle: true\n    };\n    Profesional(usuario);\n  };\n\n  var history = useHistory();\n\n  function Profesional(_x) {\n    return _Profesional.apply(this, arguments);\n  }\n\n  function _Profesional() {\n    _Profesional = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(usuario) {\n      var UsuarioURL, ProfesionalURL;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              UsuarioURL = \"/usuarios?filter[where][correo]=\" + usuario.email;\n              ProfesionalURL = \"/profesionals?filter[where][idusuario]=\";\n\n              try {\n                AxiosConexionConfig.get(UsuarioURL).then(function (usser) {\n                  if (usser.data.length === 0) {\n                    var valores = {\n                      nombre: usuario.nombre,\n                      apellidos: usuario.apellidos,\n                      correo: usuario.email\n                    };\n                    AxiosConexionConfig.post(\"/usuarios\", JSON.stringify(valores));\n                  } else {\n                    AxiosConexionConfig.get(ProfesionalURL + usser.data[0].idusuario).then(function (prof) {\n                      var LinkFinal = \"\";\n\n                      if (prof.data.length > 0) {\n                        props.setUsuario(prof.data[0]);\n                        LinkFinal = definirLink(true);\n                      } else {\n                        LinkFinal = definirLink(false);\n                      }\n\n                      history.push(LinkFinal);\n                    });\n                  }\n\n                  var urlCondicion = {\n                    where: {\n                      correo: usuario.email\n                    }\n                  };\n                  AxiosConexionConfig.get(\"/usuarios\", decodeURI(JSON.stringify(urlCondicion))).then(function (respuesta) {\n                    console.log(respuesta.data);\n                    usuario.idUsuario = respuesta.data[0].idusuario;\n                    props.setUsuarioValues(usuario);\n                  });\n                });\n              } catch (e) {\n                console.log(e);\n              }\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _Profesional.apply(this, arguments);\n  }\n\n  return /*#__PURE__*/React.createElement(GoogleLogin, {\n    clientId: \"549030926812-jbmfjsqpv4du9u2ns9gahsn7oi91qdo8.apps.googleusercontent.com\",\n    redirectUri: \"http://localhost:3000\",\n    buttonText: \"Login\",\n    render: function render(renderProps) {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n        justIcon: true,\n        href: \"#pablo\",\n        target: \"_blank\",\n        type: \"primary\",\n        className: \"login-form-button\",\n        onClick: renderProps.onClick,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }\n      }, texto));\n    },\n    onSuccess: responseGoogle,\n    onFailure: failureGoogle,\n    cookiePolicy: 'single_host_origin',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 5\n    }\n  });\n};\n\n_s(GoogleLoginComponent, \"9cZfZ04734qoCGIctmKX7+sX6eU=\", false, function () {\n  return [useHistory];\n});\n\n_c = GoogleLoginComponent;\n\nvar mapStateToProps = function mapStateToProps(rootReducer) {\n  return {\n    global: rootReducer.auth\n  };\n};\n\nexport default connect(mapStateToProps, authAction)(GoogleLoginComponent); //export default GoogleLoginComponent;\n\nvar _c;\n\n$RefreshReg$(_c, \"GoogleLoginComponent\");","map":{"version":3,"sources":["C:/Users/ighil/Documents/ReactProyects/JobInterViewMe/src/components/GoogleLogin/GoogleLogin.js"],"names":["React","GoogleLogin","authAction","connect","Button","AxiosConexionConfig","linkperfilpor","useHistory","linkAreaPersonalProfesional","linkContratarCita","linkAreaPersonalCliente","GoogleLoginComponent","props","link","texto","definirLink","prof","failureGoogle","response","console","log","responseGoogle","usuario","nombre","profileObj","givenName","apellidos","familyName","email","loginGoogle","Profesional","history","UsuarioURL","ProfesionalURL","get","then","usser","data","length","valores","correo","post","JSON","stringify","idusuario","LinkFinal","setUsuario","push","urlCondicion","where","decodeURI","respuesta","idUsuario","setUsuarioValues","e","renderProps","onClick","mapStateToProps","rootReducer","global","auth"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport GoogleLogin from 'react-google-login';\r\n\r\nimport * as authAction from \"../../store/actions/authAction\"\r\nimport { connect } from \"react-redux\";\r\nimport { Button } from 'antd';\r\nimport AxiosConexionConfig from 'conexion/AxiosConexionConfig';\r\nimport { linkperfilpor } from 'configuracion/constantes';\r\nimport { useHistory } from 'react-router';\r\nimport { linkAreaPersonalProfesional } from 'configuracion/constantes'\r\nimport { linkContratarCita } from 'configuracion/constantes';\r\nimport { linkAreaPersonalCliente } from 'configuracion/constantes';\r\n\r\n\r\nconst GoogleLoginComponent = (props) => {\r\n\r\n  const { link, texto } = props;\r\n\r\n  const definirLink = (prof) => {\r\n    if (link === \"areaPersonal\") {\r\n      if (prof) {\r\n        return linkAreaPersonalProfesional\r\n      } else {\r\n        return linkAreaPersonalCliente\r\n      }\r\n    } else {\r\n      if (link === \"contratar\") {\r\n        return linkContratarCita + \"?\" + \"38\"\r\n      }\r\n    }\r\n  }\r\n\r\n  const failureGoogle = (response) => {\r\n    console.log(response);\r\n  }\r\n\r\n\r\n\r\n  const responseGoogle = (response) => {\r\n    let usuario = {\r\n      nombre: response.profileObj.givenName,\r\n      apellidos: response.profileObj.familyName,\r\n      email: response.profileObj.email,\r\n      loginGoogle: true\r\n    }\r\n    Profesional(usuario);\r\n\r\n\r\n  }\r\n\r\n  const history = useHistory()\r\n\r\n  async function Profesional(usuario) {\r\n    const UsuarioURL = \"/usuarios?filter[where][correo]=\" + usuario.email;\r\n    const ProfesionalURL = \"/profesionals?filter[where][idusuario]=\";\r\n\r\n    try {\r\n      AxiosConexionConfig.get(UsuarioURL).then((usser) => {\r\n        if (usser.data.length === 0) {\r\n          let valores = {\r\n            nombre: usuario.nombre,\r\n            apellidos: usuario.apellidos,\r\n            correo: usuario.email\r\n          }\r\n          AxiosConexionConfig.post(\"/usuarios\", JSON.stringify(valores));\r\n        } else {\r\n          AxiosConexionConfig.get(ProfesionalURL + usser.data[0].idusuario).then((prof) => {\r\n\r\n            let LinkFinal = \"\";\r\n\r\n            if (prof.data.length > 0) {\r\n              props.setUsuario(prof.data[0]);\r\n              LinkFinal = definirLink(true);\r\n            } else {\r\n              LinkFinal = definirLink(false);\r\n            }\r\n\r\n            history.push(LinkFinal)\r\n          })\r\n        }\r\n        let urlCondicion = {\r\n          where: {\r\n            correo: usuario.email\r\n          }\r\n        }\r\n        AxiosConexionConfig.get(\"/usuarios\", decodeURI(JSON.stringify(urlCondicion))).then((respuesta) => {\r\n          console.log(respuesta.data);\r\n          usuario.idUsuario = respuesta.data[0].idusuario;\r\n          props.setUsuarioValues(usuario);\r\n        })\r\n\r\n      }\r\n      )\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  }\r\n\r\n\r\n  return (\r\n    <GoogleLogin\r\n      clientId=\"549030926812-jbmfjsqpv4du9u2ns9gahsn7oi91qdo8.apps.googleusercontent.com\"\r\n      redirectUri=\"http://localhost:3000\"\r\n      buttonText=\"Login\"\r\n      render={renderProps => (\r\n        <>\r\n          <Button\r\n            justIcon\r\n            href=\"#pablo\"\r\n            target=\"_blank\"\r\n            type=\"primary\"\r\n            className=\"login-form-button\"\r\n            onClick={renderProps.onClick}\r\n          >\r\n            {texto}\r\n          </Button>\r\n\r\n        </>\r\n      )}\r\n      onSuccess={responseGoogle}\r\n      onFailure={failureGoogle}\r\n      cookiePolicy={'single_host_origin'}\r\n    />\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (rootReducer) => {\r\n  return { global: rootReducer.auth };\r\n};\r\n\r\nexport default connect(mapStateToProps, authAction)(GoogleLoginComponent);\r\n//export default GoogleLoginComponent;"]},"metadata":{},"sourceType":"module"}