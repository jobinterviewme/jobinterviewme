{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/ighil/Documents/ReactProyects/JobInterViewMe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/ighil/Documents/ReactProyects/JobInterViewMe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:/Users/ighil/Documents/ReactProyects/JobInterViewMe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\ighil\\\\Documents\\\\ReactProyects\\\\JobInterViewMe\\\\src\\\\views\\\\AreaPersonal\\\\AreaPersonal.component.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\"; // nodejs library that concatenates classes\n\nimport classNames from \"classnames\"; // @material-ui/core components\n\nimport { makeStyles } from \"@material-ui/core/styles\"; // @material-ui/icons\n// core components\n\nimport Header from \"components/Header/Header.js\";\nimport GridContainer from \"components/Grid/GridContainer.js\";\nimport GridItem from \"components/Grid/GridItem.js\";\nimport HeaderLinks from \"components/Header/HeaderLinks.js\";\nimport Parallax from \"components/Parallax/Parallax.js\";\nimport styles from \"assets/jss/material-kit-react/views/profilePage.js\";\nimport '../ProfilePage/ProfilePage.styles.scss';\nimport './AreaPersonal.style.scss';\nimport CardCitas from \"components/CardCitas/CardCitas.component\";\nimport { PrimeIcons } from 'primereact/api'; //conexion BBDD\n\nimport AxiosConexionConfig from \"conexion/AxiosConexionConfig\";\nimport { urlUsuarios } from \"configuracion/constantes\";\nimport { urlProfesional } from \"configuracion/constantes\";\nimport { urlCitas } from \"configuracion/constantes\";\nimport { Link } from \"react-router-dom\";\nimport * as authAction from \"../../store/actions/authAction\";\nimport { connect } from \"react-redux\";\nimport { Tooltip } from \"antd\";\nvar useStyles = makeStyles(styles);\n\nvar AreaPersonal = function AreaPersonal(props) {\n  _s();\n\n  var classes = useStyles();\n  var rest = Object.assign({}, props);\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      usuario = _useState2[0],\n      setUsuario = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      profesional = _useState4[0],\n      setProfesional = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      citasPendiente = _useState6[0],\n      setCitasPendiente = _useState6[1];\n\n  var _useState7 = useState(true),\n      _useState8 = _slicedToArray(_useState7, 2),\n      reload = _useState8[0],\n      _setReload = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      id = _useState10[0],\n      setId = _useState10[1];\n\n  var fechaHoy = new Date();\n  var is1 = \"\";\n\n  if (props.global.usuario !== null) {\n    is1 = props.global.usuario.idusuario;\n  }\n\n  useEffect(function () {\n    if (props.global.idusuario !== \"\") {\n      var Usuarioo = {\n        nombre: props.global.nombre,\n        apellidos: props.global.apellidos,\n        correo: props.global.email,\n        idusuario: props.global.usuario.idusuario\n      };\n      setUsuario(Usuarioo);\n    }\n  }, [props.global.idusuario]);\n  useEffect(function () {\n    if (reload) {\n      RefreshUsuario();\n\n      _setReload(false);\n    }\n  }, [reload]);\n  useEffect(function () {\n    setCitasPendiente(null);\n  }, [props.global.usuario]);\n\n  function RefreshUsuario() {\n    return _RefreshUsuario.apply(this, arguments);\n  }\n\n  function _RefreshUsuario() {\n    _RefreshUsuario = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var citasProfesionalURL, otro, citasProfesional;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              citasProfesionalURL = \"/citas?filter=\";\n              otro = {\n                where: {\n                  idprofesional: is1\n                },\n                include: [{\n                  relation: \"CitaUsuario\"\n                }]\n              };\n              _context.prev = 2;\n              _context.next = 5;\n              return AxiosConexionConfig.get(citasProfesionalURL + encodeURIComponent(JSON.stringify(otro)));\n\n            case 5:\n              citasProfesional = _context.sent;\n              setCitasPendiente(citasProfesional.data);\n\n              if (props.global.usuario) {\n                setProfesional(props.global.usuario);\n              } //console.log(props)\n\n\n              _context.next = 13;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](2);\n              console.log(_context.t0);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 10]]);\n    }));\n    return _RefreshUsuario.apply(this, arguments);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Header, Object.assign({\n    color: \"white\",\n    brand: \"\",\n    rightLinks: /*#__PURE__*/React.createElement(HeaderLinks, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 21\n      }\n    }),\n    fixed: true,\n    changeColorOnScroll: {\n      height: 200,\n      color: \"white\"\n    }\n  }, rest, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }\n  })), /*#__PURE__*/React.createElement(Parallax, {\n    id: \"sombra\",\n    small: true,\n    filter: true,\n    color: \"headerGreen\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.container + \" headerNameTitle\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(GridContainer, {\n    justify: \"flex-end\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/perfilpro?\" + (usuario !== null ? usuario.idusuario : \"\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(GridItem, {\n    xs: 12,\n    sm: 12,\n    md: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: classes.title + \" nameTitle\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }\n  }, usuario !== null ? usuario.nombre + \" \" + usuario.apellidos + \" \" : \"\", /*#__PURE__*/React.createElement(Tooltip, {\n    title: \"Ver perfil\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"iconoVerPerfil pi pi-user p-mr-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 21\n    }\n  }))))), /*#__PURE__*/React.createElement(GridItem, {\n    xs: 12,\n    sm: 12,\n    md: 2,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(classes.main, classes.mainRaised),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.container,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(GridContainer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/area-cliente\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(GridItem, {\n    xs: 12,\n    sm: 12,\n    md: 1,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Tooltip, {\n    title: \"Citas con profesionales\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"iconoVerPerfil pi pi-user p-mr-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 21\n    }\n  })))), /*#__PURE__*/React.createElement(GridItem, {\n    xs: 12,\n    sm: 12,\n    md: 3,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.container + \" contenedorGris\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 20\n    }\n  }, \"Pr\\xF3ximas citas\"), citasPendiente !== null ? citasPendiente.map(function (cita, index) {\n    var fechaA = cita.fecha.split(\"-\");\n    var horaA = cita.hora.split(\":\");\n    var fechaCita = new Date(fechaA[0], fechaA[1] - 1, fechaA[2], horaA[0], horaA[1]);\n\n    if (fechaCita >= fechaHoy && cita.confirmada != \"decline\") {\n      return /*#__PURE__*/React.createElement(CardCitas, {\n        cita: cita,\n        setReload: function setReload(value) {\n          return _setReload(value);\n        },\n        tipo: null,\n        confirmada: cita.confirmada,\n        lugar: \"activa\",\n        fecha: new Date(cita.fecha),\n        nombre: cita.CitaUsuario.nombre,\n        toolTipsText: \"Confirmar Cita\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 29\n        }\n      });\n    } else {\n      return /*#__PURE__*/React.createElement(React.Fragment, null);\n    }\n  }) : /*#__PURE__*/React.createElement(React.Fragment, null))), /*#__PURE__*/React.createElement(GridItem, {\n    xs: 12,\n    sm: 12,\n    md: 4,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.container + \" contenedorGris\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 20\n    }\n  }, \"Historial\"), citasPendiente !== null ? citasPendiente.map(function (cita, index) {\n    var fechaA = cita.fecha.split(\"-\");\n    var horaA = cita.hora.split(\":\");\n    var fechaCita = new Date(fechaA[0], fechaA[1] - 1, fechaA[2], horaA[0], horaA[1]);\n\n    if (fechaCita < fechaHoy && cita.confirmada === \"true\") {\n      return /*#__PURE__*/React.createElement(CardCitas, {\n        cita: cita,\n        setReload: function setReload(value) {\n          return _setReload(value);\n        },\n        tipo: \"deshabilitado\",\n        confirmada: cita.confirmada,\n        lugar: \"activa\",\n        fecha: new Date(cita.fecha),\n        nombre: cita.CitaUsuario.nombre,\n        toolTipsText: \"Confirmar Cita\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 29\n        }\n      });\n    } else {\n      return /*#__PURE__*/React.createElement(React.Fragment, null);\n    }\n  }) : /*#__PURE__*/React.createElement(React.Fragment, null))), /*#__PURE__*/React.createElement(GridItem, {\n    xs: 12,\n    sm: 12,\n    md: 4,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.container + \" contenedorGris\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 20\n    }\n  }, \"Informaci\\xF3n de contacto\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 20\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 25\n    }\n  }, usuario !== null ? usuario.nombre : \"\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 20\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 25\n    }\n  }, usuario !== null ? usuario.apellidos : \"\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 20\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 25\n    }\n  }, usuario !== null ? usuario.correo : \"\")))))))));\n};\n\n_s(AreaPersonal, \"FWT8+TIKHh6nciG6F73orZlayK4=\", false, function () {\n  return [useStyles];\n});\n\n_c = AreaPersonal;\n\nvar mapStateToProps = function mapStateToProps(rootReducer) {\n  return {\n    global: rootReducer.auth\n  };\n};\n\nexport default connect(mapStateToProps, authAction)(AreaPersonal);\n\nvar _c;\n\n$RefreshReg$(_c, \"AreaPersonal\");","map":{"version":3,"sources":["C:/Users/ighil/Documents/ReactProyects/JobInterViewMe/src/views/AreaPersonal/AreaPersonal.component.jsx"],"names":["React","useEffect","useState","classNames","makeStyles","Header","GridContainer","GridItem","HeaderLinks","Parallax","styles","CardCitas","PrimeIcons","AxiosConexionConfig","urlUsuarios","urlProfesional","urlCitas","Link","authAction","connect","Tooltip","useStyles","AreaPersonal","props","classes","rest","usuario","setUsuario","profesional","setProfesional","citasPendiente","setCitasPendiente","reload","setReload","id","setId","fechaHoy","Date","is1","global","idusuario","Usuarioo","nombre","apellidos","correo","email","RefreshUsuario","citasProfesionalURL","otro","where","idprofesional","include","relation","get","encodeURIComponent","JSON","stringify","citasProfesional","data","console","log","height","color","container","title","main","mainRaised","map","cita","index","fechaA","fecha","split","horaA","hora","fechaCita","confirmada","value","CitaUsuario","mapStateToProps","rootReducer","auth"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\n// nodejs library that concatenates classes\r\nimport classNames from \"classnames\";\r\n// @material-ui/core components\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n// @material-ui/icons\r\n// core components\r\nimport Header from \"components/Header/Header.js\";\r\nimport GridContainer from \"components/Grid/GridContainer.js\";\r\nimport GridItem from \"components/Grid/GridItem.js\";\r\nimport HeaderLinks from \"components/Header/HeaderLinks.js\";\r\nimport Parallax from \"components/Parallax/Parallax.js\";\r\n\r\nimport styles from \"assets/jss/material-kit-react/views/profilePage.js\";\r\nimport '../ProfilePage/ProfilePage.styles.scss'\r\n\r\nimport './AreaPersonal.style.scss'\r\nimport CardCitas from \"components/CardCitas/CardCitas.component\";\r\n\r\nimport { PrimeIcons } from 'primereact/api';\r\n\r\n//conexion BBDD\r\nimport AxiosConexionConfig from \"conexion/AxiosConexionConfig\";\r\nimport { urlUsuarios } from \"configuracion/constantes\";\r\nimport { urlProfesional } from \"configuracion/constantes\";\r\nimport { urlCitas } from \"configuracion/constantes\";\r\n\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport * as authAction from \"../../store/actions/authAction\"\r\nimport { connect } from \"react-redux\";\r\nimport { Tooltip } from \"antd\";\r\n\r\nconst useStyles = makeStyles(styles);\r\n\r\nconst AreaPersonal=(props)=> {\r\n  const classes = useStyles();\r\n  const { ...rest } = props;\r\n\r\n  const [usuario, setUsuario] = useState(null)\r\n  const [profesional, setProfesional] = useState(null)\r\n  const [citasPendiente, setCitasPendiente] = useState(null)\r\n  const [reload,setReload] = useState(true);\r\n  const [id, setId] = useState(false);\r\n  const fechaHoy = new Date();\r\n  let is1 = \"\";\r\n\r\n    if(props.global.usuario!==null){\r\n      is1 = props.global.usuario.idusuario;\r\n    }\r\n\r\n    useEffect(() => {\r\n      if(props.global.idusuario!==\"\"){\r\n        const Usuarioo = {        \r\n          nombre:props.global.nombre,\r\n          apellidos:props.global.apellidos,\r\n          correo: props.global.email,\r\n          idusuario: props.global.usuario.idusuario\r\n        } \r\n        setUsuario(Usuarioo);\r\n      }     \r\n    }, [props.global.idusuario]);\r\n\r\n    useEffect(() => {\r\n      if(reload){\r\n        RefreshUsuario()\r\n        setReload(false);\r\n      }      \r\n    }, [reload]);\r\n\r\n    useEffect(() => {\r\n      setCitasPendiente(null)    \r\n    }, [props.global.usuario]);  \r\n\r\n  async function RefreshUsuario() {    \r\n    const citasProfesionalURL = \"/citas?filter=\"\r\n    \r\n    const otro = {\r\n      where:{\r\n      idprofesional: is1       \r\n      },  \r\n      include: [{\r\n        relation: \"CitaUsuario\"\r\n      }]\r\n    }    \r\n   \r\n    try {\r\n      const citasProfesional = await AxiosConexionConfig.get(citasProfesionalURL + encodeURIComponent(JSON.stringify(otro)));\r\n      setCitasPendiente(citasProfesional.data);\r\n\r\n      if(props.global.usuario){\r\n        setProfesional(props.global.usuario);\r\n      }\r\n      \r\n     \r\n       //console.log(props)\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  }\r\n        \r\n\r\n  return (\r\n    <div>\r\n      <Header\r\n        color=\"white\"\r\n        brand=\"\"\r\n        rightLinks={<HeaderLinks />}\r\n        fixed\r\n        changeColorOnScroll={{\r\n          height: 200,\r\n          color: \"white\"\r\n        }}\r\n        {...rest}\r\n      />\r\n\r\n      <Parallax id=\"sombra\" small filter color=\"headerGreen\" >\r\n        <div className={classes.container + \" headerNameTitle\"}>\r\n          <GridContainer justify=\"flex-end\">\r\n          <Link to={\"/perfilpro?\"+(usuario !== null ? usuario.idusuario : \"\")}>\r\n              <GridItem xs={12} sm={12} md={12}>\r\n                <h3 className={classes.title + \" nameTitle\"}>{usuario !== null ? usuario.nombre +\" \"+ usuario.apellidos +\" \": \"\"}\r\n                  <Tooltip title=\"Ver perfil\">\r\n                    <i className=\"iconoVerPerfil pi pi-user p-mr-2\"></i>\r\n                  </Tooltip>\r\n                </h3>\r\n              </GridItem>\r\n            </Link>\r\n\r\n            \r\n\r\n            <GridItem xs={12} sm={12} md={2}>\r\n            </GridItem>\r\n\r\n          </GridContainer>\r\n        </div>\r\n      </Parallax>\r\n\r\n      <div className={classNames(classes.main, classes.mainRaised)}>\r\n        <div>\r\n          <div className={classes.container}>\r\n            <GridContainer>\r\n            <Link to={\"/area-cliente\"}>\r\n\r\n              <GridItem xs={12} sm={12} md={1}>\r\n                  <Tooltip title=\"Citas con profesionales\">\r\n                    <i className=\"iconoVerPerfil pi pi-user p-mr-2\"></i>\r\n                  </Tooltip>\r\n              </GridItem>\r\n            </Link>\r\n            \r\n              <GridItem xs={12} sm={12} md={3}>\r\n                <div className={classes.container + \" contenedorGris\"}>\r\n                   <h4>Próximas citas</h4>\r\n\r\n                   {citasPendiente !== null ?\r\n                      citasPendiente.map((cita, index) => {\r\n\r\n                        const fechaA = cita.fecha.split(\"-\");\r\n                        const horaA = cita.hora.split(\":\");\r\n                        const fechaCita =new Date(fechaA[0],fechaA[1]-1,fechaA[2],horaA[0],horaA[1]);\r\n\r\n                        if(fechaCita >= fechaHoy&&cita.confirmada!=\"decline\"){\r\n                          return(\r\n                            <CardCitas cita={cita} setReload={(value)=>setReload(value)} tipo={null} confirmada={cita.confirmada} lugar=\"activa\" fecha={new Date(cita.fecha)} nombre={cita.CitaUsuario.nombre} toolTipsText=\"Confirmar Cita\"></CardCitas>\r\n                          )\r\n                        }else{\r\n                          return (<></>);\r\n                        }\r\n                      }                  \r\n                      ) : <></>\r\n                    } \r\n\r\n                   \r\n                </div>               \r\n              </GridItem>\r\n\r\n              <GridItem xs={12} sm={12} md={4}>  \r\n              <div className={classes.container + \" contenedorGris\"}>\r\n                   <h4>Historial</h4> \r\n                   {citasPendiente !== null ?\r\n                      citasPendiente.map((cita, index) => {\r\n\r\n                        const fechaA = cita.fecha.split(\"-\");\r\n                        const horaA = cita.hora.split(\":\");\r\n                        const fechaCita =new Date(fechaA[0],fechaA[1]-1,fechaA[2],horaA[0],horaA[1]);\r\n\r\n                        if(fechaCita < fechaHoy&&cita.confirmada===\"true\"){\r\n                          return(\r\n                            <CardCitas cita={cita} setReload={(value)=>setReload(value)} tipo=\"deshabilitado\" confirmada={cita.confirmada} lugar=\"activa\" fecha={new Date(cita.fecha)} nombre={cita.CitaUsuario.nombre} toolTipsText=\"Confirmar Cita\"></CardCitas>\r\n                          )\r\n                        }else{\r\n                          return (<></>);\r\n                        }\r\n                      }                  \r\n                      ) : <></>\r\n                    } \r\n                   \r\n                </div>              \r\n                \r\n              </GridItem>\r\n\r\n              <GridItem xs={12} sm={12} md={4}>   \r\n                <div className={classes.container + \" contenedorGris\"}>\r\n                   <h4>Información de contacto</h4> \r\n                   <div><h6>{usuario !== null ? usuario.nombre : \"\"}</h6></div>\r\n                   <div><h6>{usuario !== null ? usuario.apellidos : \"\"}</h6></div>\r\n                   <div><h6>{usuario !== null ? usuario.correo : \"\"}</h6></div>            \r\n\r\n                </div>    \r\n              </GridItem>\r\n            </GridContainer>\r\n\r\n            \r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div >\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (rootReducer) => {\r\n  return { global: rootReducer.auth };\r\n};\r\n\r\nexport default connect(mapStateToProps, authAction)(AreaPersonal);\r\n\r\n"]},"metadata":{},"sourceType":"module"}